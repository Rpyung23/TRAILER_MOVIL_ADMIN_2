(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{457:function(e,t,n){},471:function(e,t,n){e.exports=n.p+"img/image.76afeab.jpg"},472:function(e,t,n){"use strict";n(457)},484:function(e,t,n){"use strict";n.r(t);var o,l=n(187),r=n(9),c=n(5),d=(n(275),n(6),n(63)),v=n.n(d),m=(n(184),n(72)),h=n.n(m),f=(n(276),n(104)),E=n.n(f),_=(n(277),n(142)),O=n.n(_),C=(n(270),n(69)),y=n.n(C),T=(n(271),n(138)),A=n.n(T),N=(n(272),n(139)),S=n.n(N),B=(n(278),n(143)),D=n.n(B),I=(n(279),n(144)),L=n.n(I),w=(n(280),n(145)),P=n.n(w),R=(n(281),n(146)),j=n.n(R),k=(n(273),n(140)),x=n.n(k),V=(n(274),n(141)),F=n.n(V),U=(n(282),n(147)),z=n.n(U),M=(n(283),n(148)),J=n.n(M),$=(n(284),n(105)),G=n.n($),W=(n(51),n(10),n(14),n(61),n(62),n(450)),H=n.n(W),Z=(n(452),n(447)),K=(n(453),n(451),n(71)),X=n(149),Q=n(448),Y=(n(449),n(186)),ee=n(185),te={mixins:[Q.a],layout:"DashboardLayout",components:(o={Tabs:Y.a,TabPane:ee.a,BasePagination:X.b,flatPicker:H.a,RouteBreadCrumb:K.a},Object(c.a)(o,G.a.name,G.a),Object(c.a)(o,J.a.name,J.a),Object(c.a)(o,z.a.name,z.a),Object(c.a)(o,F.a.name,F.a),Object(c.a)(o,x.a.name,x.a),Object(c.a)(o,j.a.name,j.a),Object(c.a)(o,P.a.name,P.a),Object(c.a)(o,L.a.name,L.a),Object(c.a)(o,D.a.name,D.a),Object(c.a)(o,S.a.name,S.a),Object(c.a)(o,A.a.name,A.a),Object(c.a)(o,y.a.name,y.a),Object(c.a)(o,O.a.name,O.a),Object(c.a)(o,E.a.name,E.a),Object(c.a)(o,h.a.name,h.a),Object(c.a)(o,v.a.name,v.a),o),data:function(){return{mListEventos:[],loadingEventos:!1,tableColumnsEventos:[{prop:"nombre",label:"NOMBRE EVENTO",minWidth:240},{prop:"ubicacion",label:"UBICACION",minWidth:270},{prop:"fecha_evento",label:"F. EVENTO",minWidth:230},{prop:"numBoletosDisponibles",label:"CANT BOLETO",minWidth:180},{prop:"precio",label:"PRECIO ($)",minWidth:180}],modalAddEvento:!1,img_src_evento:null,firebaseConfig:{apiKey:"AIzaSyBCq1qLjoJBKcZs9saFysslpNX2t7TT3Ak",authDomain:"trailer-movil.firebaseapp.com",projectId:"trailer-movil",storageBucket:"trailer-movil.appspot.com",messagingSenderId:"314437642188",appId:"1:314437642188:web:c1f8cb95607d466a661f69",measurementId:"G-CZLHZXV0ZH"},appFirebase:null,oFileFoto:null,nombre_evento:null,detalle_evento:null,ubicacion_evento:null,foto_evento:null,fecha_evento:null,precio_evento:null,numBoletosDisponibles_evento:null}},methods:{readEventoAll:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingEventos=!0,e.mListEventos=[],t.prev=2,t.next=5,e.$axios.get("https://rest.roman-company.com/view/evento.php?estado=active");case 5:200==(n=t.sent).data.status?(o=e.mListEventos).push.apply(o,Object(l.a)(n.data.datos)):300==n.data.status?P.a.info({title:"Panel Salidas",message:"No existen datos disponibles."}):P.a.error({title:"Panel Salidas",message:n.data.msm}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0),P.a.info({title:"TryCatch Panel Salidas",message:t.t0.toString()});case 13:e.loadingEventos=!1;case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))()},showModalAddEvento:function(){this.modalAddEvento=!0},uploadImage:function(){this.foto_evento=null;var e=this;if(null!=this.oFileFoto){var t=firebase.storage().ref(this.oFileFoto.name).put(this.oFileFoto);t.on("state_changed",(function(e){var progress=e.bytesTransferred/e.totalBytes*100;console.log("Progreso de carga: "+progress+"%")}),(function(e){console.error("Error al cargar la foto:",e)}),(function(){t.snapshot.ref.getDownloadURL().then((function(t){e.foto_evento=t,console.log("URL de la foto subida:",t)}))}))}else console.log("FILE ES NULL")},changeFoto:function(){console.log("CHANGUE FOTO");var e=document.getElementById("fileInput").files;if(e&&e.length){this.oFileFoto=e[0];var t=URL.createObjectURL(this.oFileFoto);this.img_src_evento=t,document.getElementById("imagenPrevisualizacionEvento").src=t,this.uploadImage()}},saveEvento:function(){var e=this;try{if(null==this.nombre_evento&&null==this.detalle_evento&&null==this.ubicacion_evento&&null==this.fecha_evento&&null==this.precio_evento&&null==this.numBoletosDisponibles_evento)return void this.$notify({title:"Evento",message:"NO SE PERMITEN DATOS VACIOS",type:"danger"});var data=JSON.stringify({nombre:this.nombre_evento,detalle:this.detalle_evento,ubicacion:this.ubicacion_evento,foto:this.foto_evento,fecha_evento:Object(Z.a)(this.fecha_evento),precio:null==this.precio_evento?500:this.precio_evento,numBoletosDisponibles:null==this.numBoletosDisponibles_evento?0:this.numBoletosDisponibles_evento});console.log(data);var t={method:"post",maxBodyLength:1/0,url:"https://rest.roman-company.com/view/evento.php",headers:{"Content-Type":"application/json"},data:data};this.$axios.request(t).then((function(t){console.log(JSON.stringify(t.data)),200==t.data.status?(e.readEventoAll(),e.closeEvento()):alert("NO SE REGISTRO EL EVENTO")})).catch((function(e){console.log(e),alert(e.toString())}))}catch(e){alert(e.toString())}},closeEvento:function(){this.nombre_evento=null,this.detalle_evento=null,this.ubicacion_evento=null,this.foto_evento=null,this.fecha_evento=null,this.precio_evento=null,this.numBoletosDisponibles_evento=null,this.modalAddEvento=!1},deleteEvento:function(e){var t=this;try{var n={method:"delete",maxBodyLength:1/0,url:"https://rest.roman-company.com/view/evento.php",headers:{"Content-Type":"application/json"},data:JSON.stringify({id_evento:e})};this.$axios.request(n).then((function(e){200==e.data.status?t.readEventoAll():alert("NO SE PUDO ELIMINAR EL EVENTO")})).catch((function(e){alert(e.toString()),console.log(e)}))}catch(e){alert(e.toString())}}},mounted:function(){this.appFirebase=firebase.initializeApp(this.firebaseConfig),this.readEventoAll()}},ne=(n(472),n(3)),component=Object(ne.a)(te,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("base-header",[o("div",{staticClass:"align-items-center py-3"},[o("card",{staticClass:"no-border-card col",staticStyle:{"margin-bottom":"0.5rem"},attrs:{"body-classes":"px-0 pb-1 card-bodyTopOpcionesRPagosVehiculoPRoduccionPanelDespachoBusqueda cardSelectRubrosEstadosPagosVehiculoProduccionContainerPanelDespachoBusqueda","footer-classes":"pb-2"}},[o("div",{staticClass:"cardTextoRPagosVehiculoProduccionPanelDespachoBusqueda"}),e._v(" "),o("div",{staticClass:"cardSelectRubrosEstadosPagosVehiculoProduccionContainerPanelDespachoBusqueda"},[o("div",{staticClass:"buttonCenterEndDerecha"},[o("base-button",{attrs:{icon:"",type:"primary",size:"sm"},on:{click:function(t){return e.readEventoAll()}}},[o("span",{staticClass:"btn-inner--icon"},[o("i",{staticClass:"el-icon-search"})])]),e._v(" "),o("base-button",{attrs:{type:"default",size:"sm",title:"NUEVO USUARIO"},on:{click:function(t){return e.showModalAddEvento()}}},[o("span",{staticClass:"btn-inner--icon"},[o("i",{staticClass:"ni ni-fat-add"})])])],1)])]),e._v(" "),o("card",{staticClass:"no-border-card",staticStyle:{"margin-bottom":"0rem"},attrs:{"body-classes":"card-bodyRPagosVehiculoProduccion px-0 pb-1","footer-classes":"pb-2"}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEventos,expression:"loadingEventos"}],staticClass:"tablePanelControlProduccion",staticStyle:{width:"100%"},attrs:{"element-loading-text":"Cargando Datos...",data:e.mListEventos,"row-key":"id","header-row-class-name":"thead-dark",height:"calc(100vh - 8.90rem)"}},[o("el-table-column",{attrs:{width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.numBoletosDisponibles>0?o("base-button",{attrs:{size:"sm",title:"ELIMINAR",type:"danger"},on:{click:function(n){return e.deleteEvento(t.row.id_evento)}}},[o("i",{staticClass:"ni ni-fat-remove"})]):e._e(),e._v(" "),t.row.numBoletosDisponibles<=0?o("badge",{staticClass:"mr-2",attrs:{type:"danger"}},[e._v("AGOTADO")]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"foto",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("img",{staticClass:"avatar rounded-circle mr-3",attrs:{src:e.row.foto,alt:"../static/img/default.jpg"}})]}}])}),e._v(" "),e._l(e.tableColumnsEventos,(function(t){return o("el-table-column",e._b({key:t.label},"el-table-column",t,!1))})),e._v(" "),o("el-table-column",{attrs:{prop:"estado",label:"ESTADO",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1==t.row.estado?"ACTIVADO":"INACTIVO")+"\n            ")]}}])}),e._v(" "),o("div",{attrs:{slot:"empty"},slot:"empty"})],2)],1),e._v(" "),o("modal",{attrs:{show:e.modalAddEvento,size:"lg"},on:{"update:show":function(t){e.modalAddEvento=t}}},[o("div",{staticClass:"container_add_evento"},[o("div",{staticClass:"input_add_evento_img"},[o("img",{staticStyle:{"max-width":"100%",height:"25rem"},attrs:{id:"imagenPrevisualizacionEvento",src:n(471),alt:""}}),e._v(" "),o("base-button",{staticClass:"btn-icon",staticStyle:{width:"100%"},attrs:{for:"fileInput",type:"default",icon:"ni ni-bag-17"}},[e._v("SUBIR FOTO")]),e._v(" "),o("input",{staticClass:"hidden-file-input",attrs:{type:"file",id:"fileInput",accept:"image/*"},on:{change:function(t){return e.changeFoto()}}})],1),e._v(" "),o("div",{staticClass:"input_dato_evento"},[o("base-input",{attrs:{"prepend-icon":"ni ni-diamond",name:"NOMBRE DEL EVENTO",placeholder:"NOMBRE DEL EVENTO",rules:"required"},model:{value:e.nombre_evento,callback:function(t){e.nombre_evento=t},expression:"nombre_evento"}}),e._v(" "),o("base-input",{attrs:{"prepend-icon":"ni ni-world",name:"UBCICACION DEL EVENTO",placeholder:"UBCICACION DEL EVENTO",rules:"required"},model:{value:e.ubicacion_evento,callback:function(t){e.ubicacion_evento=t},expression:"ubicacion_evento"}}),e._v(" "),o("el-date-picker",{staticStyle:{width:"100%","margin-bottom":"1.5rem"},attrs:{type:"datetime",placeholder:"FECHA EVENTO"},model:{value:e.fecha_evento,callback:function(t){e.fecha_evento=t},expression:"fecha_evento"}}),e._v(" "),o("base-input",{attrs:{"prepend-icon":"ni ni-money-coins",name:"PRECIO DEL EVENTO",placeholder:"PRECIO DEL EVENTO",rules:"required"},model:{value:e.precio_evento,callback:function(t){e.precio_evento=t},expression:"precio_evento"}}),e._v(" "),o("base-input",{attrs:{"prepend-icon":"ni ni-tag",name:"CANT BOLETOS",placeholder:"CANT BOLETOS",rules:"required"},model:{value:e.numBoletosDisponibles_evento,callback:function(t){e.numBoletosDisponibles_evento=t},expression:"numBoletosDisponibles_evento"}}),e._v(" "),o("base-input",{staticStyle:{"margin-bottom":"0rem"},attrs:{"prepend-icon":"ni ni-single-copy-04",name:"DETALLE EVENTO",placeholder:"DETALLE EVENTO",rules:"required"},model:{value:e.detalle_evento,callback:function(t){e.detalle_evento=t},expression:"detalle_evento"}})],1)]),e._v(" "),o("template",{slot:"footer"},[o("base-button",{staticClass:"ml-auto",attrs:{type:"danger"},on:{click:function(t){return e.closeEvento()}}},[e._v("CANCELAR\n          ")]),e._v(" "),o("base-button",{attrs:{type:"default"},on:{click:function(t){return e.saveEvento()}}},[e._v("GUARDAR EVENTO")])],1)],2)],1)])],1)}),[],!1,null,null,null);t.default=component.exports}}]);