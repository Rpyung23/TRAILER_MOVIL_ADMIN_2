(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{447:function(t,e,n){"use strict";function o(t){var e=new Date(t),n=e.getDate(),o=e.getMonth();n<10&&(n="0"+n),(o+=1)<10&&(o="0"+o);var r=e.getHours(),l=e.getMinutes();return r<10&&(r="0"+r),l<10&&(l="0"+l),e.getFullYear()+"-"+o+"-"+n+" "+r+":"+l+":00"}n.d(e,"a",(function(){return o}))},448:function(t,e,n){"use strict";n(29),n(19),n(14),n(61),n(62),n(103),n(70),n(10),n(15),n(41),n(42),n(43);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,d=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){d=!0,l=t},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw l}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}e.a={computed:{pagedData:function(){return this.tableData.slice(this.from,this.to)},queriedData:function(){var t=this;if(!this.searchQuery)return this.pagination.total=this.tableData.length,this.pagedData;var e=this.tableData.filter((function(e){var n,r=!1,l=o(t.propsToSearch);try{for(l.s();!(n=l.n()).done;){var c=e[n.value].toString();c.includes&&c.includes(t.searchQuery)&&(r=!0)}}catch(t){l.e(t)}finally{l.f()}return r}));return this.pagination.total=e.length,e.slice(this.from,this.to)},to:function(){var t=this.from+this.pagination.perPage;return this.total<t&&(t=this.total),t},from:function(){return this.pagination.perPage*(this.pagination.currentPage-1)},total:function(){return this.pagination.total=this.tableData.length,this.tableData.length}},data:function(){return{pagination:{perPage:10,currentPage:1,perPageOptions:[5,10,25,50],total:0},propsToSearch:["name","email","age"],searchQuery:"",searchedData:[],fuseSearch:null}}}},456:function(t,e,n){},470:function(t,e,n){"use strict";n(456)},483:function(t,e,n){"use strict";n.r(e);var o,r=n(187),l=n(9),c=n(5),d=(n(275),n(6),n(63)),m=n.n(d),f=(n(184),n(72)),h=n.n(f),E=(n(276),n(104)),O=n.n(E),v=(n(277),n(142)),y=n.n(v),C=(n(270),n(69)),R=n.n(C),_=(n(271),n(138)),A=n.n(_),N=(n(272),n(139)),w=n.n(N),S=(n(278),n(143)),P=n.n(S),L=(n(279),n(144)),x=n.n(L),I=(n(280),n(145)),j=n.n(I),D=(n(281),n(146)),k=n.n(D),T=(n(273),n(140)),M=n.n(T),B=(n(274),n(141)),V=n.n(B),F=(n(282),n(147)),z=n.n(F),$=(n(283),n(148)),U=n.n($),H=(n(284),n(105)),J=n.n(H),G=(n(51),n(10),n(14),n(61),n(62),n(287)),Q=n.n(G),W=n(450),Y=n.n(W),X=(n(451),n(447),n(71)),K=n(149),Z=n(448),tt=(n(449),n(186)),et=n(185),at=Q.a.import("formats/font");at.whitelist=["mirza","roboto"],Q.a.register(at,!0);var nt={mixins:[Z.a],layout:"DashboardLayout",components:(o={Tabs:tt.a,TabPane:et.a,BasePagination:K.b,flatPicker:Y.a,RouteBreadCrumb:X.a},Object(c.a)(o,J.a.name,J.a),Object(c.a)(o,U.a.name,U.a),Object(c.a)(o,z.a.name,z.a),Object(c.a)(o,V.a.name,V.a),Object(c.a)(o,M.a.name,M.a),Object(c.a)(o,k.a.name,k.a),Object(c.a)(o,j.a.name,j.a),Object(c.a)(o,x.a.name,x.a),Object(c.a)(o,P.a.name,P.a),Object(c.a)(o,w.a.name,w.a),Object(c.a)(o,A.a.name,A.a),Object(c.a)(o,R.a.name,R.a),Object(c.a)(o,y.a.name,y.a),Object(c.a)(o,O.a.name,O.a),Object(c.a)(o,h.a.name,h.a),Object(c.a)(o,m.a.name,m.a),o),data:function(){return{mListEmails:[],loadingEmail:!1,tableColumnsEmail:[{prop:"name_notificacion",label:"NOMBRE NOTIFICACION",minWidth:280},{prop:"cant_alcanzada",label:"CANT ENV.",minWidth:150},{prop:"ultimo_envio",label:"U. FECHA",minWidth:180}],modalAddEmail:!1,editorOption:{modules:{toolbar:"#toolbar"}},editorOption1:{modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{font:["Arial","serif","sans-serif","Microsoft YaHei","monospace","cursive"]}],[{font:["mirza","roboto"]}]]}},editorOption2:{modules:{toolbar:"#toolbar-b"}},mListClientes:[],content_email:null,name_content_email:null}},methods:{readNotificacionAll:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingEmail=!0,t.mListEmails=[],e.prev=2,e.next=5,t.$axios.get("https://rest.roman-company.com/view/notification.php?tipo=2");case 5:200==(n=e.sent).data.status?(o=t.mListEmails).push.apply(o,Object(r.a)(n.data.datos)):300==n.data.status?j.a.info({title:"Panel Salidas",message:"No existen datos disponibles."}):j.a.error({title:"Panel Salidas",message:n.data.msm}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),j.a.info({title:"TryCatch Panel Salidas",message:e.t0.toString()});case 13:t.loadingEmail=!1;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))()},showmodalAddEmail:function(){this.modalAddEmail=!0},onEditorBlur:function(t){console.log("editor blur!",t)},onEditorFocus:function(t){console.log("editor focus!",t)},onEditorReady:function(t){console.log("editor ready!",t)},customButtonClick:function(){console.log(this)},update:function(t){return console.log("hahha",t),t.preventDefault(),!1},readAllClientes:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mListClientes=[],e.prev=1,e.next=4,t.$axios.get("https://rest.roman-company.com/view/cliente.php/all_clientes");case 4:if(200==(n=e.sent).data.status)for(i=0;i<n.data.datos.length>0;i++)t.mListClientes.push(n.data.datos[i].email);e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},sendEmails:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.post("http://localhost:3002/send_email_trailer",{subject:"TRAILER MOVIL EMAIL",usuarios:e.mListClientes,html_content:t});case 2:200==(o=n.sent).data.status_code?j.a.success({title:"CORREOS  ELECTRONICOS",message:"ENVIADOS CON EXITO.....!"}):j.a.error({title:"ERROR CORREOS  ELECTRONICOS",message:o.data.msm});case 4:case"end":return n.stop()}}),n)})))()},saveNewNotification:function(){var t=this;if(null!=this.name_content_email)if(null!=this.content_email){var e={method:"post",maxBodyLength:1/0,url:"https://rest.roman-company.com/view/notification.php/email",headers:{"Content-Type":"application/json"},data:JSON.stringify({name:this.name_content_email,html_content:this.content_email})};this.$axios.request(e).then((function(e){console.log(JSON.stringify(e.data)),200==e.data.status&&(t.readNotificacionAll(),t.closeModalEmail(),console.log(t.content_email))})).catch((function(t){console.log(t)}))}else j.a.info({title:"ERROR CORREOS  ELECTRONICO",message:"PORFAVOR INGRESE EL CONTENIDO DEL CORREO"});else j.a.info({title:"ERROR CORREOS  ELECTRONICO",message:"PORFAVOR INGRESE EL NOMBRE DEL CORREO"})},closeModalEmail:function(){this.name_content_email=null,this.content_email=null,this.modalAddEmail=!1}},computed:{editor:function(){return this.$refs.myTextEditor.quill}},mounted:function(){this.readAllClientes(),this.readNotificacionAll()}},ot=(n(470),n(3)),component=Object(ot.a)(nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("base-header",[n("div",{staticClass:"align-items-center py-3"},[n("card",{staticClass:"no-border-card col",staticStyle:{"margin-bottom":"0.5rem"},attrs:{"body-classes":"px-0 pb-1 card-bodyTopOpcionesRPagosVehiculoPRoduccionPanelDespachoBusqueda cardSelectRubrosEstadosPagosVehiculoProduccionContainerPanelDespachoBusqueda","footer-classes":"pb-2"}},[n("div",{staticClass:"cardTextoRPagosVehiculoProduccionPanelDespachoBusqueda"}),t._v(" "),n("div",{staticClass:"cardSelectRubrosEstadosPagosVehiculoProduccionContainerPanelDespachoBusqueda"},[n("div",{staticClass:"buttonCenterEndDerecha"},[n("base-button",{attrs:{icon:"",type:"primary",size:"sm"},on:{click:function(e){return t.readNotificacionAll()}}},[n("span",{staticClass:"btn-inner--icon"},[n("i",{staticClass:"el-icon-search"})])]),t._v(" "),n("base-button",{attrs:{type:"default",size:"sm",title:"NUEVO USUARIO"},on:{click:function(e){return t.showmodalAddEmail()}}},[n("span",{staticClass:"btn-inner--icon"},[n("i",{staticClass:"ni ni-fat-add"})])])],1)])]),t._v(" "),n("card",{staticClass:"no-border-card",staticStyle:{"margin-bottom":"0rem"},attrs:{"body-classes":"card-bodyRPagosVehiculoProduccion px-0 pb-1","footer-classes":"pb-2"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingEmail,expression:"loadingEmail"}],staticClass:"tablePanelControlProduccion",staticStyle:{width:"100%"},attrs:{"element-loading-text":"Cargando Datos...",data:t.mListEmails,"row-key":"id","header-row-class-name":"thead-dark",height:"calc(100vh - 8.90rem)"}},[n("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("base-button",{attrs:{size:"sm",title:"REENVIAR",type:"default"},on:{click:function(n){return t.sendEmails(e.row.html_content)}}},[n("i",{staticClass:"ni ni-send"})])]}}])}),t._v(" "),t._l(t.tableColumnsEmail,(function(e){return n("el-table-column",t._b({key:e.label},"el-table-column",e,!1))})),t._v(" "),n("el-table-column",{attrs:{prop:"html_content",label:"DETALLE EMAIL",width:"950"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{domProps:{innerHTML:t._s(e.row.html_content)}})]}}])}),t._v(" "),n("div",{attrs:{slot:"empty"},slot:"empty"})],2)],1),t._v(" "),n("modal",{attrs:{show:t.modalAddEmail,size:"lg"},on:{"update:show":function(e){t.modalAddEmail=e}}},[n("base-input",{attrs:{"prepend-icon":"ni ni-diamond",name:"NOMBRE DEL LA NOTIFICACION",placeholder:"NOMBRE DEL LA NOTIFICACION",rules:"required"},model:{value:t.name_content_email,callback:function(e){t.name_content_email=e},expression:"name_content_email"}}),t._v(" "),n("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption1},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},ready:function(e){return t.onEditorReady(e)}},model:{value:t.content_email,callback:function(e){t.content_email=e},expression:"content_email"}}),t._v(" "),n("div",{staticClass:"text-right",staticStyle:{"margin-top":"1rem"}},[n("base-button",{attrs:{type:"danger"},on:{click:function(e){return t.closeModalEmail()}}},[t._v("Cancelar")]),t._v(" "),n("base-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(e){return t.saveNewNotification()}}},[t._v("Guardar")])],1)],1)],1)])],1)}),[],!1,null,null,null);e.default=component.exports}}]);